# react 生命周期

## 概述

react v16.3之前

挂载：

* constructor()
* componentWillMount()
* render()
* componentDidMount()

更新：

* componentWillReceiveProps()
* shouldComponentUpdate()
* componentWillUpdate()
* render()
* getSnapshotBeforeUpdate()
* componentDidUpdate()

react v16.3之后

挂载：

* constructor()
* static getDerivedStateFromProps()
* render()
* componentDidMount()

更新：

* static getDerivedStateFromProps()
* shouldComponentUpdate()
* render()
* getSnapshotBeforeUpdate()
* componentDidUpdate()

比较

删除

* componentWillMount
* componentWillReceiveProps
* componentWillUpdate

增加

* static getDerivedStateFromProps
* getSnapshotBeforeUpdate

## static getDerivedStateFromProps(nextProps， prevState)

getDerivedStateFromProps 存在只为了一个目的。它让组件在 props 发生改变时更新它自身的内部 state

用法

```js
static getDerivedStateFromProps(nextProps, prevState) {
  const {type} = nextProps;
  // 当传入的type发生变化的时候，更新state
  if (type !== prevState.type) {
      return {
        type,
      };
  }
  // 否则，对于state不进行任何操作
  return null;
}

```

## shouldComponentUpdate(nextProps， nextState)

根据 shouldComponentUpdate() 的返回值，判断 React 组件的输出是否受当前 state 或 props 更改的影响。默认行为是 state 每次发生变化组件都会重新渲染。大部分情况下，你应该遵循默认行为。此方法仅作为性能优化的方式而存在

用法

```js
static getDerivedStateFromProps(nextProps, prevState) {
  const {type} = nextProps;
  // 当传入的type发生变化的时候，更新state
  if (type !== prevState.type) {
      return {
        type,
      };
  }
  // 否则，对于state不进行任何操作
  return null;
}

```
